<div class="animated fadeIn">
  <!--/.row-->
  <div class="row" *ngIf="mode==1">
    <div class="col-lg-12">
      <div class="card">
        <div class="card-header">
          <i class="fa fa-edit"></i>Modifier certification
          <div class="card-actions">

            <a href="#" class="btn-close"><i class="icon-close"></i></a>
          </div>
        </div>
        <div
          class="card-body">
          <form class="form-horizontal" #f="ngForm" (ngSubmit)="onEditCertification(f.value)">
            <div class="form-group">
              <label class="control-label" for="certificationName">Certification Name:</label>
              <input minlength="4" id="certificationName" name="certName" #certificationName="ngModel"
                     [(ngModel)]="certification.certName" class="form-control" size="16" type="text" required>
              <div *ngIf="certificationName.invalid && (certificationName.dirty || certificationName.touched)"
                   class="alert alert-danger">
                <div *ngIf="certificationName.errors.required">
                  CertificationName is required.
                </div>
                <div *ngIf="certificationName.errors.minlength">
                  CertificationName must be at least 4 characters long.
                </div>
              </div>
            </div>

            <div class="form-group">
              <label class="control-label" for="formationUrl">Certification URL:</label>
              <input minlength="4" id="formationUrl" name="frmName" #certificationUrl="ngModel"
                     [(ngModel)]="certification.url" class="form-control" size="16" type="text" required>
              <div *ngIf="certificationUrl.invalid && (certificationUrl.dirty || certificationUrl.touched)"
                   class="alert alert-danger">
                <div *ngIf="certificationUrl.errors.required">
                  CertificationURL is required.
                </div>
                <div *ngIf="certificationUrl.errors.minlength">
                  CertificationURL must be at least 4 characters long.
                </div>
              </div>
            </div>

            <div class="form-group">
              <label class="control-label" for="dateDebut">Date Echéance:</label>
              <input id="dateDebut" class="form-control" name="dateStrt" [(ngModel)]="certification.dateEch" size="16"
                     type="date" required>
            </div>

            <div class="form-group">
              <label class="control-label">Participants :</label>
              <ng-select [items]="users"
                         name="participants"
                         bindLabel="username"
                         multiple="true"
                         [(ngModel)]="selectedUsers"
                         loadingText="Chargement ..."
                         placeholder="Selectionner participants"
                         required>

                <ng-template ng-label-tmp let-item="item">
                  <div class="ng-value ng-star-inserted">
                    <img height="20" width="20"
                         [src]="link+item.username+'.jpg'" onerror="this.src='assets/img/avatars/default.jpg'">
                    <b>{{item.username}}</b>
                    <span aria-hidden="true" class="ng-value-icon left ng-star-inserted"
                          (click)="removeOne(item)">×</span>
                  </div>
                </ng-template>

                <ng-template ng-option-tmp let-item="item" let-index="index">
                  <img height="25" width="25" class="img-avatar" [src]="link+item.username+'.jpg'"
                       onerror="this.src='assets/img/avatars/default.jpg'"/>
                  <b>{{item.username}}</b>
                </ng-template>

              </ng-select>

              <p>
                Nombre participants selectionnés : {{selectedUsers.length}}
              </p>

            </div>


            <div class="form-actions">
              <button [disabled]="!f.valid" type="submit" class="btn btn-primary"><i class="fa fa-dot-circle-o"></i>
                Submit
              </button>
              <button type="reset" class="btn  btn-danger"><i class="fa fa-ban"></i> Reset</button>
            </div>
          </form>
        </div>
      </div>
    </div> <!--/.col-->
  </div><!--/.row-->

  <div class="row" *ngIf="mode==2">
    <div class="col-lg-12">
      <div class="card">
        <div class="card-header">
          <i class="fa fa-edit"></i>Confirmation de la modification
          <div class="card-actions">
            <a href="#" class="btn-setting"><i class="icon-settings"></i></a>
            <button type="button" class="btn btn-minimize"
                    (click)="toggleCollapse()"><i class={{iconCollapse}}></i>
            </button>
            <a href="#" class="btn-close"><i class="icon-close"></i></a>
          </div>
        </div>
        <div
          class="card-body">
          <div class="form-group">
            <label class="control-label">Id Certification:</label>
            <label>{{certification.id}}</label>
          </div>

          <div class="form-group">
            <label class="control-label">Certification Name:</label>
            <label>{{certification.certName}}</label>
          </div>

          <div class="form-group">
            <label class="control-label">URL:</label>
            <label>{{certification.url}}</label>
          </div>

          <div class="form-group">
            <label class="control-label">Date échéance:</label>
            <label>{{certification.dateEch | date }}</label>
          </div>

          <div class="form-group">
            <label class="control-label">Les participants : </label>
            <table class="table table-striped table-sm">
              <thead>
              <tr>
                <th>Numéro</th>
                <th>Username</th>
                <th>Nom</th>
                <th>Prénom</th>
                <th>Service</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let p of selectedUsers; let i=index;">
                <td>{{i+1}}</td>
                <td>{{p.username}}</td>
                <td>{{p.lastName}}</td>
                <td>{{p.firstName}}</td>
                <td>{{p.service.servName}}</td>
              </tr>
              </tbody>
            </table>
          </div>

          <div class="form-actions">
            <button (click)="toModeOne()" class="btn btn-primary">Nouvelle Certification</button>
          </div>

        </div>
      </div>
    </div> <!--/.col-->
  </div><!--/.row-->
</div>
